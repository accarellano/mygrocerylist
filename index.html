<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Grocery List</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* === (Styles remain unchanged from your version, except note column removed) === */
    :root {
      --bg: #ffffff;
      --text: #000000;
      --card: #f9f9f9;
      --border: #ccc;
      --highlight: #dcbca7;
    }
    body.dark {
      --bg: #121212;
      --text: #f0f0f0;
      --card: #1e1e1e;
      --border: #444;
      --highlight: #f89b86;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: Arial, sans-serif;
      padding: 10px;
    }
    h2 {
      text-align: center;
      cursor: pointer;
      display: inline-block;
      margin: 0;
    }
    #titleWrapper {
      text-align: center;
      margin-bottom: 10px;
    }
    #titleColor {
border: 1px solid var(--border);
  border-radius: 4px;
  cursor: pointer;
background: transparent;
  width: 15px;
  height: 15px;
 padding: 0;
  appearance: none;
  -webkit-appearance: none;
}

    }
    .top-row {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 5px;
    }
    .field {
      display: flex;
      align-items: center;
      gap: 5px;
      margin-bottom: 5px;
    }
    .field input[type="date"],
    .field input[type="number"] {
      font-size: 0.9em;
      padding: 4px;
    }
    #budgetRow {
      margin-bottom: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 10px;
    }
    th, td {
      border: 1px solid var(--border);
      padding: 8px;
      text-align: center;
      vertical-align: top;
    }
    th {
      background-color: var(--card);
    }
    input, select, textarea {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
    }
    button {
      padding: 10px;
      margin-top: 10px;
      width: 100%;
      background-color: #008b98;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 1em;
      cursor: pointer;
    }
    .summary {
      font-weight: bold;
      text-align: center;
      margin: 8px 0;
    }
    .red { color: red; }
    .blue { color: blue; }
    .yellow { color: goldenrod; }
    textarea {
      margin-top: 10px;
      height: 60px;
    }
    .footer {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9em;
      color: var(--border);
    }
    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .actions button {
      flex: 1;
      min-width: 120px;
    }
    .switch-container {
      display: flex;
      align-items: center;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }
    .switch {
      position: relative;
      display: inline-block;
      width: 50px;
      height: 24px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0; left: 0;
      right: 0; bottom: 0;
      background-color: #ccc;
      transition: 0.4s;
      border-radius: 24px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 18px; width: 18px;
      left: 3px; bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #008b98;
    }
    input:checked + .slider:before {
      transform: translateX(26px);
    }
    @media (max-width: 600px) {
      .top-row {
        flex-direction: column;
        align-items: flex-start;
      }
      .top-row .field {
        width: 100%;
      }
      th, td {
        font-size: 0.8em;
      }
      button {
        font-size: 0.9em;
      }
    }
    .remove-btn {
      background-color: #e0e0e0;
      color: #000000;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      padding: 5px 10px;
    }
    .remove-btn:hover {
      background-color: #cccccc;
    }

	input[type="text"],
	input[type="number"],
	input[type="date"],
	select,
	textarea,
	button {
	  font-size: 1em;
	  touch-action: manipulation;
	}

	input, select, textarea {
	  max-width: 100%;
	}

	canvas#categoryChart {
	  width: 100% !important;
	  height: auto !important;
	}

	.table-container {
	  width: 100%;
	  overflow-x: auto;
	}

	.table-container table {
	  min-width: 600px;
	}

	td input[type="text"] {
	  min-width: 120px;
	  white-space: normal;
	}
	
	#budgetRow .field label {
	  white-space: nowrap;
	}
	.color-bar {
  -webkit-appearance: none;
  appearance: none;
  border: none;
  width: 100vw;
  height: 8px;
  cursor: pointer;
  padding: 0;
  margin: 10px 0 20px 0;
  display: block;
  background: none;
}

.color-bar::-webkit-color-swatch-wrapper,
.color-bar::-webkit-color-swatch,
.color-bar::-moz-color-swatch {
  padding: 0;
  border: none;
  border-radius: 0;
}

#colorBar {
  width: 100vw;
  height: 8px;
  background-color: var(--highlight);
  cursor: pointer;
  margin: 10px 0 20px;
}

.zoomed-out-table {
  transform: scale(0.85);
  transform-origin: top left;
  width: calc(100% / 0.85); /* ~117.65% */
}





  </style>
</head>

<body>
  <!-- Title and Color Bar -->
<div id="titleWrapper">
  <h2 id="title" onclick="editTitle()" style="color: var(--highlight);">My Grocery List</h2>
</div>

<!-- Hidden color input -->
<input type="color" id="titleColor" value="#dcbca7" onchange="changeTitleColor(this.value)" style="display: none;" />

<!-- Visible color bar -->
<div id="colorBar" onclick="document.getElementById('titleColor').click();"></div>


<!-- INSERT HERE -->
<div class="top-row">
  <div class="field" style="flex-direction: row; gap: 10px;">
    <label for="dateInput"><strong>Date:</strong></label>
    <input type="date" id="dateInput" style="max-width: 160px;" />
  </div>
</div>


  <div class="top-row">
    <div class="field" style="flex: 1; flex-direction: row; gap: 10px; white-space: nowrap;">
  <label for="budget"><strong>Budget Allotted:</strong></label>
  <input type="number" id="budget" placeholder="‚Ç±" oninput="calculateTotals()" />
</div>

  </div>


<div class="table-container">
  <table id="groceryTable">
    <thead>
      <tr>
        <th>#</th>
        <th>‚úî</th>
        <th>Item</th>
        <th>Budget (‚Ç±)</th>
        <th>Actual (‚Ç±)</th>
        <th>üóë</th>
      </tr>
    </thead>
    <tbody></tbody>

<tr>
  <td colspan="6">
    <button onclick="addItem()">+ Add Item</button>
  </td>
</tr>

<tfoot>
  <tr>
    <td colspan="3" style="text-align: right;"><strong>Totals:</strong></td>
    <td id="budgetValue" class="blue" style="font-weight: bold;">‚Ç±0.00</td>
    <td id="totalValue" class="blue" style="font-weight: bold;">‚Ç±0.00</td>
    <td></td>
  </tr>
</tfoot>
</table>

</div>

 

<div id="remainingBudget" class="summary">Remaining Budget: <span id="remainingValue" class="blue">‚Ç±0.00</span></div>



  <textarea placeholder="Notes..."></textarea>

  <canvas id="categoryChart" style="max-width: 500px; margin: 20px auto; display: block;"></canvas>

  <div class="actions">
    <button onclick="window.print()">üñ® Export / Print</button>
    <button onclick="share()">üì§ Share</button>
  </div>

  <div class="switch-container">
    <label>üåó Dark Mode</label>
    <label class="switch">
      <input type="checkbox" id="darkToggle" onchange="toggleDarkMode()" />
      <span class="slider"></span>
    </label>
  </div>

<div class="switch-container">
  <label>üîç Zoom View</label>
  <label class="switch">
    <input type="checkbox" id="zoomToggle" onchange="toggleZoom()" />
    <span class="slider"></span>
  </label>
</div>


  <div class="footer">Created by AC | All rights reserved 2025</div>

  <script>
    const tableBody = document.querySelector("#groceryTable tbody");
    const budgetInput = document.getElementById("budget");
    const totalAmountEl = document.getElementById("totalAmount");
    const remainingBudgetEl = document.getElementById("remainingBudget");
    const dateInput = document.getElementById("dateInput");
    const titleEl = document.getElementById("title");
    let categoryChart;

    function editTitle() {
      const current = titleEl.innerText;
      const newTitle = prompt("Rename your grocery list:", current);
      if (newTitle) titleEl.innerText = newTitle;
    }

    function changeTitleColor(color) {
  titleEl.style.color = color;
  document.getElementById("colorBar").style.backgroundColor = document.getElementById("titleColor").value;

}


    function addItem() {
      const row = document.createElement("tr");
      row.innerHTML = `
        <td></td>
        <td><input type="checkbox" /></td>
        <td>
          <input type="text" placeholder="Item Name" /><br/>
          <select>
            <option value=""></option>
            <option>Produce</option>
            <option>Dairy</option>
            <option>Meat</option>
            <option>Snacks</option>
            <option>Beverages</option>
            <option>Household</option>
            <option>Other</option>
          </select>
        </td>
        <td><input type="number" step="0.01" onchange="calculateTotals(); updateCategoryChart();" /></td>
        <td><input type="number" step="0.01" onchange="calculateTotals(); updateCategoryChart();" /></td>
        <td><button class="remove-btn" onclick="removeItem(this)">‚ùå</button></td>
      `;
      tableBody.appendChild(row);
      updateRowNumbers();
    }

    function removeItem(button) {
      const row = button.closest("tr");
      row.remove();
      updateRowNumbers();
      calculateTotals();
      updateCategoryChart();
    }

    function updateRowNumbers() {
      const rows = tableBody.querySelectorAll("tr");
      rows.forEach((row, index) => {
        row.cells[0].textContent = index + 1;
      });
    }

    function calculateTotals() {
  let total = 0;
  let totalBudget = 0;
  const rows = tableBody.querySelectorAll("tr");

  rows.forEach(row => {
    const actual = parseFloat(row.cells[4].querySelector("input").value) || 0;
    const budget = parseFloat(row.cells[3].querySelector("input").value) || 0;
    total += actual;
    totalBudget += budget;
  });

  const budget = parseFloat(budgetInput.value) || 0;
  const remaining = budget - total;

  const totalValueEl = document.getElementById("totalValue");
  const budgetValueEl = document.getElementById("budgetValue");
  const remainingValueEl = document.getElementById("remainingValue");

  totalValueEl.textContent = `‚Ç±${total.toFixed(2)}`;
  budgetValueEl.textContent = `‚Ç±${totalBudget.toFixed(2)}`;
  remainingValueEl.textContent = `‚Ç±${remaining.toFixed(2)}`;

  // Reset all colors
  ["red", "blue", "yellow"].forEach(c => {
    totalValueEl.classList.remove(c);
    budgetValueEl.classList.remove(c);
    remainingValueEl.classList.remove(c);
  });

  // Apply new color
  let colorClass = remaining < 0 ? "red" : remaining > 0 ? "blue" : "yellow";

  totalValueEl.classList.add(colorClass);
  budgetValueEl.classList.add(colorClass);
  remainingValueEl.classList.add(colorClass);
}


    function toggleDarkMode() {
      document.body.classList.toggle("dark");
      const isDark = document.body.classList.contains("dark");
      localStorage.setItem("darkMode", isDark);
      document.getElementById("darkToggle").checked = isDark;
    }

    function share() {
      const title = titleEl.innerText;
      const url = window.location.href;

      if (navigator.share) {
        navigator.share({
          title: title,
          text: "Here's my grocery list!",
          url: url,
        }).catch(err => alert("Share failed."));
      } else {
        navigator.clipboard.writeText(url);
        alert("Link copied to clipboard!");
      }
    }

    function updateCategoryChart() {
      const rows = tableBody.querySelectorAll("tr");
      const categoryTotals = {};

      rows.forEach(row => {
        const category = row.querySelector("select").value;
        const actual = parseFloat(row.cells[4].querySelector("input").value) || 0;
        if (category) {
          categoryTotals[category] = (categoryTotals[category] || 0) + actual;
        }
      });

      const data = {
        labels: Object.keys(categoryTotals),
        datasets: [{
          data: Object.values(categoryTotals),
          backgroundColor: [
            "#f8b195", "#f67280", "#c06c84", "#6c5b7b", "#355c7d", "#99b898", "#ff847c"
          ]
        }]
      };

      if (categoryChart) {
        categoryChart.data = data;
        categoryChart.update();
      } else {
        const ctx = document.getElementById("categoryChart").getContext("2d");
        categoryChart = new Chart(ctx, {
          type: 'pie',
          data: data,
          options: {
            responsive: true,
            plugins: {
              legend: { position: 'bottom' },
              title: { display: true, text: 'Spending by Category' }
            }
          }
        });
      }
    }

    if (localStorage.getItem("darkMode") === "true") {
      document.body.classList.add("dark");
      document.getElementById("darkToggle").checked = true;
    }

    for (let i = 0; i < 10; i++) addItem();
    dateInput.valueAsDate = new Date();

	function toggleZoom() {
	  const isZoomed = document.getElementById("zoomToggle").checked;
	  document.querySelector(".table-container").classList.toggle("zoomed-out-table", isZoomed);
	}



  </script>
</body>
</html>
